
{
  "entities": {
    "achievement": {
      "title": "Achievement",
      "description": "Represents a user's progress on a specific achievement.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "The unique identifier for the achievement." },
        "isUnlocked": { "type": "boolean", "description": "Whether the user has unlocked this achievement." },
        "progress": { "type": "number", "description": "The user's current progress towards the achievement." },
        "unlockedAt": { "type": "string", "format": "date-time", "description": "The timestamp when the achievement was unlocked." }
      },
      "required": ["id", "isUnlocked", "progress"]
    },
    "userStats": {
      "title": "User Statistics",
      "description": "Stores aggregated game statistics for a user.",
      "type": "object",
      "properties": {
        "highScore": { "type": "number", "description": "The user's highest score achieved in any game." },
        "gamesPlayed": { "type": "number", "description": "The total number of games the user has played." },
        "totalScore": { "type": "number", "description": "The cumulative score across all games played." },
        "neonBits": { "type": "number", "description": "The amount of in-game currency the user has." },
        "equippedCosmetic": { "type": "string", "description": "The ID of the cosmetic the user has equipped." },
        "nestId": { "type": "string", "description": "The ID of the Nest the user is a member of."}
      },
      "required": []
    },
    "cosmetic": {
        "title": "Cosmetic",
        "description": "Represents a cosmetic item a user has unlocked.",
        "type": "object",
        "properties": {
            "id": { "type": "string", "description": "The unique identifier for the cosmetic." },
            "unlockedAt": { "type": "string", "format": "date-time", "description": "The timestamp when the cosmetic was unlocked." }
        },
        "required": ["id", "unlockedAt"]
    },
    "nest": {
      "title": "Nest",
      "description": "Represents a clan or group of players.",
      "type": "object",
      "properties": {
        "name": { "type": "string", "description": "The name of the Nest." },
        "motto": { "type": "string", "description": "A short description or motto for the Nest." },
        "emblemId": { "type": "string", "description": "The ID for the Nest's chosen emblem." },
        "isPublic": { "type": "boolean", "description": "If true, players can join without approval." },
        "ownerId": { "type": "string", "description": "The UID of the player who created the Nest." },
        "memberCount": { "type": "number", "description": "The number of members in the Nest." },
        "totalScore": { "type": "number", "description": "The cumulative score of all members." }
      },
      "required": ["name", "isPublic", "ownerId"]
    },
    "nestMember": {
      "title": "Nest Member",
      "description": "Represents a user's membership and role within a Nest.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The UID of the user." },
        "username": { "type": "string", "description": "The display name of the user." },
        "role": { "type": "string", "enum": ["admin", "moderator", "member"], "description": "The role of the user in the Nest." },
        "joinedAt": { "type": "string", "format": "date-time", "description": "The timestamp when the user joined." }
      },
      "required": ["userId", "username", "role", "joinedAt"]
    },
    "chatMessage": {
      "title": "Chat Message",
      "description": "A message in any chat channel.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The UID of the user who sent the message." },
        "username": { "type": "string", "description": "The display name of the user." },
        "text": { "type": "string", "description": "The content of the message." },
        "timestamp": { "type": "string", "format": "date-time", "description": "The time the message was sent." }
      },
      "required": ["userId", "username", "text", "timestamp"]
    },
    "username": {
      "title": "Username",
      "description": "A registry document to ensure username uniqueness. The document ID is the lowercase username.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The UID of the user who owns this username." }
      },
      "required": ["userId"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
     "/users/{userId}/achievements/{achievementId}": {
      "schema": { "$ref": "#/entities/achievement" },
      "description": "Stores individual achievement status for each user."
    },
    "/users/{userId}/stats/summary": {
      "schema": { "$ref": "#/entities/userStats" },
      "description": "Stores a summary of a user's game statistics. The document ID must be 'summary'."
    },
    "/users/{userId}/cosmetics/{cosmeticId}": {
      "schema": { "$ref": "#/entities/cosmetic" },
      "description": "Stores the cosmetic items a user has unlocked."
    },
    "/usernames/{username}": {
      "schema": { "$ref": "#/entities/username" },
      "description": "A collection where each document ID is a unique, lowercase username used for uniqueness checks."
    },
    "/nests/{nestId}": {
      "schema": { "$ref": "#/entities/nest" },
      "description": "Stores all Nests (clans) created by players."
    },
    "/nests/{nestId}/members/{userId}": {
      "schema": { "$ref": "#/entities/nestMember" },
      "description": "Stores the members and their roles for a specific Nest."
    },
    "/global-messages/{messageId}": {
      "schema": { "$ref": "#/entities/chatMessage" },
      "description": "Stores messages for the global chat."
    },
    "/nests/{nestId}/messages/{messageId}": {
      "schema": { "$ref": "#/entities/chatMessage" },
      "description": "Stores messages for a specific Nest's private chat."
    },
    "/dms/{channelId}/messages/{messageId}": {
      "schema": { "$ref": "#/entities/chatMessage" },
      "description": "Stores direct messages between players."
    }
  }
}
